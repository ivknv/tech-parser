<%inherit file="base.html"/>
<%block name="title">Articles from some sites</%block>
<%block name="content">
	<div id="searchbox">
		<form method="get">
			<input list="articles" name="q" type="search" placeholder="Search articles" value='${q}'>
			<button type="submit">Search</button>
		</form>
		<datalist id="articles">
			% for article in all_articles:
				<option value="${article[0]['title']}" />
			% endfor
		</datalist>
		% if q:
			<br/>
			<a href="/">Go back</a>
		% endif
	</div>
	% for article in articles:
		<div class="article">
			<h3>
				<a class="open-tab" onclick="window.open('/go/${article[0]['link']}'); return false;" href="/go/${article[0]['link']}">
					<img src="/static/icons/${article[0]['source']}.ico" width="16" />
				</a>
				<a data-spoiler='true' class="${article[0]['source']}" onclick="toggleText(this)">
					${article[0]['title']}
				</a>
			</h3>
			<div class="summary">
				<p>
					${article[0]['summary']}
				</p>
				<a onclick="window.open('/go/${article[0]['link']}'); return false;" href="/go/${article[0]['link']}">
					Open article in new tab
				</a>
				<p>
					<a data-pocket-label="pocket" data-pocket-count="horizontal"
						class="pocket-btn" data-lang="en"
						data-save-url="${article[0]['link']}"></a>
					<script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
				</p>
			</div>
		</div>
	% endfor
	<div id="pagination">
		% if page_num > 1:
			<a href="/${page_num-1}?q=${q}">Previous</a>
		% endif
		
		<a class="current">${ page_num }</a>
		
		% if page_num < num_pages:
			<a href="/${page_num+1}?q=${q}">Next</a>
		% endif
	</div>
</%block>
